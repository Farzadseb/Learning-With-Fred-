<script>
    const urlParams = new URLSearchParams(window.location.search);
    const score = Number(urlParams.get("score") || 0);

    const name = localStorage.getItem("studentName") || "ناشناس";

    fetch("https://script.google.com/macros/s/AKfycbxrsVMOjWXCorHll5-x_gL1e-Zs9JqMHH9C3QQ9SHdExoL-8GMNhJ_XBLGqXpX2jU6y/exec", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            name: name,
            lesson: "1",
            score: score,
            max: 10,           // ← دقیقاً max (نه maxScore)
            studentCode: "-",
            device: navigator.userAgent
        })
    }).then(r => r.text())
      .then(t => console.log("Response:", t))
      .catch(err => console.log("ERROR:", err));

    document.getElementById("scoreBox").innerText =
        "امتیاز شما: " + score + " از 10";
</script>
